# 入隅（内角）計算ロジック

## 1. 入隅とは

建物形状がL字型やコの字型など、内側に角が入り込んだ形状のこと。
足場割付では、この入隅部分を考慮した計算が必要。

## 2. L字型建物の表現例

### テキスト表現

```
Y方向
  ↑
  |
  +----------------+  (7000, 10000)
  |     edge1      |
  |                |
edge6              edge2
  |                |
  +----+           |
  edge5|           |
       |edge4      |
       +-----------+
    (4000, 0)   edge3   (7000, 0)

←----→
 4000mm（切り欠き幅）

←----------------→
     7000mm（全体幅）

全体高さ: 10000mm
切り欠き高さ: 4000mm

辺の名称（左上から時計回り）:
  edge1: 上辺
  edge2: 右辺
  edge3: 下辺（右側）
  edge4: 入隅の縦の辺（上向き）
  edge5: 入隅の横の辺（左向き）
  edge6: 左辺

入隅部分の2辺: edge4とedge5
```

### 座標表現

頂点リスト（左下を原点、時計回り）:
```
(0, 4000) → (0, 10000) → (7000, 10000) → (7000, 0) → (4000, 0) → (4000, 4000)
```

**入隅位置**: (4000, 4000)

### パラメータ表現

```yaml
建物形状: L字型
外接矩形:
  幅（X方向）: 7000mm
  高さ（Y方向）: 10000mm
切り欠き:
  位置: 左下
  幅: 4000mm
  高さ: 4000mm
入隅座標: (4000, 4000)
```

### 足場計算結果

**外接矩形ベースでの計算**:

```
X方向（幅7000mm）:
  離隔距離: 850mm
  足場総長さ: 8700mm（= 850 + 7000 + 850）

Y方向（高さ10000mm）:
  離隔距離: 850mm
  足場総長さ: 11700mm（= 850 + 10000 + 850）
```

**足場配置イメージ**:

```
          850mm
        ←----→
  +----------------------+
  |   +----------------+ |
  |   |     edge1      | |
  |   |                | |
  |edge6              edge2
  |   |                | |
  |   +----+           | |
  |   edge5|           | |
  |        |edge4      | |
  |        +-----------+ |
  +----------------------+

  足場総長さ（X方向）: 8700mm
  足場総長さ（Y方向）: 11700mm
```

## 3. 入隅計算の基本方針

1. **外接矩形からの削り取り**
   - まず全体の外接矩形で足場総長さを計算
   - 入隅部分を「削り取る」イメージで調整

2. **離隔距離の一貫性**
   - 建物外周から足場までの距離は全周で一定を保つ
   - 入隅部分でも同じ離隔距離を適用

3. **スパン割付の調整**
   - 入隅による余りを、障害物のない箇所へ割り当て
   - 標準ブロック（1800, 1500, 1200, 900, 600mm）で構成

## 4. 実装予定

- [ ] L字型建物の割付計算
- [ ] コの字型建物の割付計算
- [ ] 複数入隅の処理
- [ ] 入隅部分のコーナー処理
