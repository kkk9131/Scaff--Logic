# 足場割付計算 - 基本手順と基本計算

## 1. 前提条件

- **使用図面**: 建物平面図のみ（平面図計算では立面図は基本的に不要）
- **基本原則**: 建物外周から足場までの距離を**目標離隔距離**に近づける

### 離隔距離の決定ルール

- **基本値**: 900mm（軒の出がない、または小さい場合）
- **軒の出考慮**: 軒の出 + 80mm 以上
  - 例: 軒の出600mm → 最小離隔680mm以上
  - 例: 軒の出900mm → 最小離隔980mm以上
- **最終決定**: 上記の最小値以上で、計算結果に最も近い値を採用

## 2. 基本手順

### Step 1: 建物平面図確認

平面図から建物の外形を把握する

### Step 2: 足場総長さの決定

- X方向とY方向それぞれの足場総長さを決定
- 例: X方向 9000mm、Y方向 10200mm
- **重要**: 外周面から足場までの距離は、最初に決定した値から変更しない

#### 離隔距離計算の基本ロジック

**目標**: 建物外周から足場までの距離を900mmに最も近づける

**計算手順**:
1. 建物幅を1800mmで割った余りを求める
2. 余りから300の倍数（1800, 2100, 2400...）を引く
3. 結果を-1倍して正の数に戻す（建物からはみ出た足場の長さ）
4. 両サイドに均等分配するため÷2
5. 900mmに最も近い値になる倍数を選択

**計算例1: 建物幅5460mmの場合**
```
1. 5460 % 1800 = 60
2. 60 - 1800 = -1740
3. -1740 × (-1) = 1740（はみ出し長さ）
4. 1740 ÷ 2 = 870mm（離隔距離）
5. 足場総長さ: 870 + 5460 + 870 = 7200mm = 1800 × 4
```

**計算例2: 建物幅6000mmの場合**
```
案1: 1800を引く場合
  1. 6000 % 1800 = 600
  2. 600 - 1800 = -1200
  3. 1200 ÷ 2 = 600mm（離隔距離）→ 900mmから遠い

案2: 2400を引く場合
  1. 6000 % 1800 = 600
  2. 600 - 2400 = -1800
  3. 1800 ÷ 2 = 900mm（離隔距離）→ 900mmぴったり ✓

採用: 案2（離隔900mm、足場総長さ7800mm）
```

### Step 3: スパン割付

#### 3-1. 障害物なしの場合（標準割付）

- **優先使用**: 1800mm
- **使用可能ブロック**: 1800mm、1500mm、1200mm、900mm、600mm
- ルールに従ったパズルのように、これらのブロックを割り当てる

**計算例**:
- 9000mm → 1800mm × 5 = 9000mm
- 10200mm → 1800mm × 5 + 1200mm = 10200mm

#### 3-2. 障害物ありの場合（調整割付）

**対象障害物**:
- 入隅
- 下屋
- バルコニー
- 障害物
- 開口部

**処理方法**:
1. 総長さの大きい長方形をベースとする
2. 入隅等の障害物部分を「削り取る」イメージで割付
3. 余りを障害物のない箇所へ割り当てる
